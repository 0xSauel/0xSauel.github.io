<!DOCTYPE html>
<html style="height: 100%; margin: 0;">
<head>
	<title>Thedas map</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./scripts/leaflet/leaflet.css">
	<script type="text/javascript" src="./scripts/leaflet/leaflet.js"></script>
	<script type="text/javascript" src="./scripts/leaflet/MovingMarker.js"></script>
	<script type="text/javascript" src="./scripts/leaflet/leaflet.curve.js"></script>
	<script type="text/javascript" src="./scripts/leaflet/leaflet.bezier.js"></script>
	<script src='https://unpkg.com/leaflet.marker.slideto@0.2.0/Leaflet.Marker.SlideTo.js'></script>
	<script type="text/javascript" src="/scripts/snap.svg.js"></script>
	
</head>
<body style="height: 100%; margin: 0;">
<div id="map" style="width: 100%; height: 100%; background: #000000; margin: 0;"></div>
<script type="text/javascript">

	var mapSW =[0, 8192],
	mapNE =[8192, 0];
//initialize map object
var map = L.map('map').setView([0,0], 4);

//Reference tiles
L.tileLayer('map/{z}/{x}/{y}.png', {
	minZoom: 3,
	maxZoom: 5,
	continuousWorld: false,
	noWrap: true,
	crs: L.CRS.Simple,
	edgeBufferTiles: 2,
}).addTo(map)

map.setMaxBounds(new L.LatLngBounds(
	map.unproject(mapSW, map.getMaxZoom()),
	map.unproject(mapNE, map.getMaxZoom())
	));

//////////////////////////////////////////////////////////////

var latlngs = [];

var latlng1 = [42, -111],
	latlng2 = [-11, 42];

var offsetX = latlng2[1] - latlng1[1],
	offsetY = latlng2[0] - latlng1[0];

var r = Math.sqrt( Math.pow(offsetX, 2) + Math.pow(offsetY, 2) ),
	theta = Math.atan2(offsetY, offsetX);

var thetaOffset = (3.14/10);

var r2 = (r/2)/(Math.cos(thetaOffset)),
	theta2 = theta + thetaOffset;

var midpointX = (r2 * Math.cos(theta2)) + latlng1[1],
	midpointY = (r2 * Math.sin(theta2)) + latlng1[0];

var midpointLatLng = [midpointY, midpointX];

latlngs.push(latlng1, midpointLatLng, latlng2);

var pathOptions = {
	color: 'rgba(255,255,255,0.5)',
	weight: 2,
}

if (typeof document.getElementById('map').animate === "function") { 
	var durationBase = 10000;
   	var duration = Math.sqrt(Math.log(r)) * durationBase;
	// Scales the animation duration so that it's related to the line length
	// (but such that the longest and shortest lines' durations are not too different).
   	// You may want to use a different scaling factor.
  	pathOptions.animate = {
		duration: duration,
		iterations: Infinity,
		easing: 'ease-in-out',
		direction: 'normal',
	}
}

var curvedPath1 = L.curve(['M', latlng1,'Q', midpointLatLng, latlng2], pathOptions).addTo(map);

//////////////////////////////////////////////////////////////

 L.bezier({
        path: [
            [
                {lat: 44.8731, lng: 100.7718},
                {lat: -50.7669, lng: 44.8691},
            ]
        ],

        icon: {
            path: "/images/ship2.png"
        }
    }).addTo(map);


///////////////////////////////////////////////////////////
var path = L.curve(['M',[44.54136296522163,100.520507812500004],
					'Q',[50.214338608258224,70.564453125000004],[-50,44]],
					{color:'red',fill:false}).addTo(map);


///////////////////////////////////////////////////////////////

var myIcon = L.icon({
  iconUrl: '/images/ship2.png',
  iconSize: [77, 58],
  iconAnchor: [36, 50],
  // popupAnchor: [0, -80],

});
//var line = L.line([L.latLng(44.54136296522163,100.520507812500004), L.latLng(50.214338608258224,70.564453125000004)]).addTo(map);
var marker = L.Marker.movingMarker([[44.54136296522163,100.520507812500004],[50.214338608258224,70.564453125000004]],
                    [20000]).addTo(map);
marker.start();
</script>

</body>
</html>